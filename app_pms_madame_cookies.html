        <!-- Nettoyage -->
        <div class="tab-content" id="nettoyage">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üßΩ Plan de Nettoyage</h2>
                    <div class="card-actions">
                        <button class="btn btn-primary" onclick="nouveauNettoyage()">
                            üßπ Nouvelle Session
                        </button>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Date</label>
                        <input type="date" class="form-input" id="nett-date">
                    </div>
                    <div class="form-group">
                        <label class="form-label">√âquipe</label>
                        <input type="text" class="form-input" id="nett-equipe" placeholder="Nom de l'√©quipe">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Type de Nettoyage</label>
                        <select class="form-input" id="nett-type">
                            <option>Nettoyage quotidien</option>
                            <option>Nettoyage hebdomadaire</option>
                            <option>Nettoyage approfondi</option>
                            <option>Nettoyage apr√®s incident</option>
                        </select>
                    </div>
                </div>

                <div class="card" style="margin: 20px 0;">
                    <h3>üè≠ Zones de Nettoyage</h3>
                    <div class="nettoyage-zones">
                        <div class="zone-section">
                            <h4 style="background: #e3f2fd; padding: 10px; border-radius: 5px; color: #1565c0;">
                                ü•Ñ ZONE PR√âPARATION
                            </h4>
                            <div class="zone-items">
                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="prep" data-item="plans">
                                        Plans de travail
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>D√©graissant + D√©sinfectant</option>
                                            <option>Eau de Javel dilu√©e</option>
                                            <option>Nettoyant multi-surfaces</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('prep-plans')">üì∑</button>
                                    </div>
                                </div>

                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="prep" data-item="petrins">
                                        P√©trins (2 √ó 40L)
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>D√©graissant alimentaire</option>
                                            <option>Nettoyant sp√©cialis√© inox</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('prep-petrins')">üì∑</button>
                                    </div>
                                </div>

                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="prep" data-item="bouleuse">
                                        Bouleuse
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>D√©graissant alimentaire</option>
                                            <option>Nettoyant multi-surfaces</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('prep-bouleuse')">üì∑</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="zone-section">
                            <h4 style="background: #fff3e0; padding: 10px; border-radius: 5px; color: #ef6c00;">
                                üî• ZONE CUISSON
                            </h4>
                            <div class="zone-items">
                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="cuisson" data-item="four-ext">
                                        Four (ext√©rieur)
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>Nettoyant four</option>
                                            <option>D√©graissant puissant</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('four-ext')">üì∑</button>
                                    </div>
                                </div>

                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="cuisson" data-item="four-int">
                                        Four (int√©rieur)
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>Nettoyant four professionnel</option>
                                            <option>Produit sp√©cialis√© haute temp√©rature</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('four-int')">üì∑</button>
                                    </div>
                                </div>

                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="cuisson" data-item="grilles">
                                        Grilles et plaques
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>D√©graissant</option>
                                            <option>Trempage eau chaude + liquide vaisselle</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('grilles')">üì∑</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="zone-section">
                            <h4 style="background: #f3e5f5; padding: 10px; border-radius: 5px; color: #7b1fa2;">
                                üè™ ZONES STOCKAGE
                            </h4>
                            <div class="zone-items">
                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="stockage" data-item="etageres">
                                        √âtag√®res stockage sec
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>D√©tergent d√©sinfectant</option>
                                            <option>Lingettes d√©sinfectantes</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('etageres')">üì∑</button>
                                    </div>
                                </div>

                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="stockage" data-item="chambres-froides">
                                        Chambres froides (hebdomadaire)
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>D√©graissant + D√©sinfectant</option>
                                            <option>Nettoyant sp√©cialis√© froid</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('chambres-froides')">üì∑</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="zone-section">
                            <h4 style="background: #e8f5e8; padding: 10px; border-radius: 5px; color: #2e7d32;">
                                üè¢ SOLS ET SURFACES
                            </h4>
                            <div class="zone-items">
                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="sols" data-item="sol-atelier">
                                        Sols atelier production
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>D√©graissant sols</option>
                                            <option>Eau de Javel + d√©tergent</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('sol-atelier')">üì∑</button>
                                    </div>
                                </div>

                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="sols" data-item="murs">
                                        Murs atelier (hebdomadaire)
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>D√©tergent d√©sinfectant</option>
                                            <option>Nettoyant multi-surfaces</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('murs')">üì∑</button>
                                    </div>
                                </div>

                                <div class="nettoyage-item">
                                    <label class="nettoyage-label">
                                        <input type="checkbox" class="nett-item" data-zone="sols" data-item="dechets">
                                        √âvacuation d√©chets
                                    </label>
                                    <div class="item-details">
                                        <input type="time" class="form-input nett-heure" placeholder="Heure">
                                        <select class="form-input nett-produit">
                                            <option>Sacs poubelle neufs</option>
                                            <option>D√©sinfectant containers</option>
                                        </select>
                                        <select class="form-input nett-controle">
                                            <option value="ok">‚úÖ OK</option>
                                            <option value="nok">‚ùå NOK</option>
                                        </select>
                                        <button class="btn btn-primary" onclick="photographierNettoyage('dechets')">üì∑</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Photos Avant/Apr√®s Nettoyage</label>
                    <div class="photo-upload" onclick="ouvrirCamera('nettoyage')">
                        üì∑ Photographier les zones nettoy√©es
                    </div>
                    <div class="photo-preview" id="nettoyage-photos"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">Observations / Probl√®mes rencontr√©s</label>
                    <textarea class="form-input" id="nett-observations" rows="3" 
                              placeholder="Difficult√©s, produits manquants, zones n√©cessitant attention particuli√®re..."></textarea>
                </div>

                <button class="btn btn-success" onclick="sauvegarderNettoyage()">
                    üíæ Enregistrer Nettoyage
                </button>
            </div>
        </div>

        <!-- R√©ception -->
        <div class="tab-content" id="reception">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üì¶ Contr√¥le R√©ception</h2>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Date R√©ception</label>
                        <input type="date" class="form-input" id="recep-date">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Fournisseur</label>
                        <select class="form-input" id="recep-fournisseur">
                            <option>FRAIS IMPORT</option>
                            <option>√âLEVAGE DU PATELIN</option>
                            <option>OVOCOOP</option>
                            <option>REUDIS</option>
                            <option>Autre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">N¬∞ Bon de Livraison</label>
                        <input type="text" class="form-input" id="recep-bl" placeholder="N¬∞ BL">
                    </div>
                    <div class="form-group">
                        <label class="form-label">R√©ceptionnaire</label>
                        <input type="text" class="form-input" id="recep-nom" placeholder="Wendy JEAN MARIE">
                    </div>
                </div>

                <div class="card" style="margin: 20px 0;">
                    <h3>üìã Contr√¥les Produits</h3>
                    <div class="reception-controls">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Produit</th>
                                    <th>Qt√© Command√©e</th>
                                    <th>Qt√© Re√ßue</th>
                                    <th>DLC/DLUO</th>
                                    <th>T¬∞ R√©ception</th>
                                    <th>√âtat Emballage</th>
                                    <th>Conforme</th>
                                </tr>
                            </thead>
                            <tbody id="reception-produits">
                                <tr>
                                    <td>
                                        <select class="form-input">
                                            <option>Farine</option>
                                            <option>Beurre</option>
                                            <option>≈íufs frais</option>
                                            <option>≈íufs liquides</option>
                                            <option>Chocolat</option>
                                            <option>Autres</option>
                                        </select>
                                    </td>
                                    <td><input type="text" class="form-input" placeholder="Ex: 25kg"></td>
                                    <td><input type="text" class="form-input" placeholder="Ex: 25kg"></td>
                                    <td><input type="date" class="form-input"></td>
                                    <td><input type="number" step="0.1" class="form-input" placeholder="¬∞C"></td>
                                    <td>
                                        <select class="form-input">
                                            <option value="intact">Intact</option>
                                            <option value="endommage">Endommag√©</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select class="form-input">
                                            <option value="oui">‚úÖ OUI</option>
                                            <option value="non">‚ùå NON</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="btn btn-primary" onclick="ajouterLigneReception()">‚ûï Ajouter Produit</button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Contr√¥les Hygi√®ne Transport</label>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="ctrl-vehicule"> V√©hicule propre
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="ctrl-temperature-transport"> Temp√©rature transport respect√©e
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="ctrl-chauffeur"> Chauffeur en tenue propre
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="ctrl-protection"> Produits prot√©g√©s
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Photos Livraison</label>
                    <div class="photo-upload" onclick="ouvrirCamera('reception')">
                        üì∑ Photographier les produits re√ßus
                    </div>
                    <div class="photo-preview" id="reception-photos"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">Non-conformit√©s / Observations</label>
                    <textarea class="form-input" id="recep-observations" rows="3" 
                              placeholder="Signaler les anomalies, r√©serves, actions prises..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">D√©cision</label>
                    <select class="form-input" id="recep-decision">
                        <option value="accepte-total">‚úÖ Acceptation totale</option>
                        <option value="accepte-reserve">‚ö†Ô∏è Acceptation avec r√©serves</option>
                        <option value="accepte-partiel">üîÑ Acceptation partielle</option>
                        <option value="refuse-total">‚ùå Refus total</option>
                    </select>
                </div>

                <button class="btn btn-success" onclick="sauvegarderReception()">
                    üíæ Valider R√©ception
                </button>
            </div>
        </div>

        <!-- Historique -->
        <div class="tab-content" id="historique">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üìã Historique des Contr√¥les</h2>
                    <div class="card-actions">
                        <input type="date" class="form-input" id="filtre-date-debut" style="width: auto;">
                        <input type="date" class="form-input" id="filtre-date-fin" style="width: auto;">
                        <select class="form-input" id="filtre-type" style="width: auto;">
                            <option value="">Tous les contr√¥les</option>
                            <option value="temperature">Temp√©ratures</option>
                            <option value="production">Production</option>
                            <option value="nettoyage">Nettoyage</option>
                            <option value="reception">R√©ception</option>
                        </select>
                        <button class="btn btn-primary" onclick="filtrerHistorique()">üîç Filtrer</button>
                    </div>
                </div>

                <div id="historique-data">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date/Heure</th>
                                <th>Type</th>
                                <th>Responsable</th>
                                <th>Statut</th>
                                <th>Observations</th>
                                <th>Photos</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="table-historique">
                            <!-- Donn√©es charg√©es dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Exports DAAF -->
        <div class="tab-content" id="exports">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üìÑ Exports pour Contr√¥le DAAF</h2>
                </div>

                <div class="export-section">
                    <h3>üìä Rapports Disponibles</h3>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" style="color: #28a745;">üìà</div>
                            <div class="stat-label">Rapport Temp√©ratures</div>
                            <p style="font-size: 12px; margin-top: 10px;">Historique complet des relev√©s de temp√©rature avec graphiques</p>
                            <button class="btn btn-success" onclick="exporterRapportTemperatures()">üìÑ G√©n√©rer PDF</button>
                        </div>

                        <div class="stat-card">
                            <div class="stat-number" style="color: #007bff;">üè≠</div>
                            <div class="stat-label">Rapport Production</div>
                            <p style="font-size: 12px; margin-top: 10px;">Tra√ßabilit√© compl√®te des lots produits et mati√®res premi√®res</p>
                            <button class="btn btn-primary" onclick="exporterRapportProduction()">üìÑ G√©n√©rer PDF</button>
                        </div>

                        <div class="stat-card">
                            <div class="stat-number" style="color: #ffc107;">üßΩ</div>
                            <div class="stat-label">Rapport Nettoyage</div>
                            <p style="font-size: 12px; margin-top: 10px;">Plan de nettoyage avec photos avant/apr√®s</p>
                            <button class="btn btn-warning" onclick="exporterRapportNettoyage()">üìÑ G√©n√©rer PDF</button>
                        </div>

                        <div class="stat-card">
                            <div class="stat-number" style="color: #dc3545;">üìã</div>
                            <div class="stat-label">Rapport Complet PMS</div>
                            <p style="font-size: 12px; margin-top: 10px;">Document complet pour audit DAAF avec tous les contr√¥les</p>
                            <button class="btn btn-danger" onclick="exporterRapportComplet()">üìÑ G√©n√©rer PDF</button>
                        </div>
                    </div>
                </div>

                <div class="export-section">
                    <h3>üóÑÔ∏è Donn√©es Brutes</h3>
                    <p>Export des donn√©es au format Excel pour traitement externe</p>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">P√©riode d'export</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="date" class="form-input" id="export-debut">
                                <input type="date" class="form-input" id="export-fin">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Type de donn√©es</label>
                            <select class="form-input" id="export-type">
                                <option value="all">Toutes les donn√©es</option>
                                <option value="temperatures">Temp√©ratures uniquement</option>
                                <option value="production">Production uniquement</option>
                                <option value="nettoyage">Nettoyage uniquement</option>
                                <option value="reception">R√©ceptions uniquement</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn btn-success" onclick="exporterExcel()">
                        üìä Exporter Excel
                    </button>
                </div>

                <div class="export-section">
                    <h3>‚òÅÔ∏è Sauvegarde Cloud</h3>
                    <p>Sauvegarde automatique des donn√©es sur le cloud pour s√©curit√©</p>
                    
                    <div class="alert alert-success">
                        ‚úÖ Derni√®re sauvegarde: <span id="derniere-sauvegarde">Aujourd'hui 14:30</span>
                    </div>

                    <button class="btn btn-primary" onclick="sauvegardeManuelle()">
                        ‚òÅÔ∏è Sauvegarde Manuelle
                    </button>
                    
                    <button class="btn btn-warning" onclick="restaurerDonnees()">
                        üì• Restaurer Donn√©es
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Cam√©ra -->
    <div id="modalCamera" class="modal">
        <div class="modal-content">
            <span class="close" onclick="fermerCamera()">&times;</span>
            <h2>üì∑ Prise de Photo</h2>
            <div class="camera-section">
                <video id="video" autoplay></video>
                <canvas id="canvas"></canvas>
                <div style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="prendrePhoto()">üì∏ Capturer</button>
                    <button class="btn btn-warning" onclick="fermerCamera()">‚ùå Annuler</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentTab = 'dashboard';
        let stream = null;
        let currentPhotoType = '';
        let donneesPMS = {
            temperatures: [],
            productions: [],
            nettoyages: [],
            receptions: [],
            photos: {}
        };

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            // D√©finir la date actuelle
            document.getElementById('current-date').textContent = new Date().toLocaleDateString('fr-FR');
            
            // Initialiser les dates dans les formulaires
            const today = new Date().toISOString().split('T')[0];
            const now = new Date().toISOString().slice(0, 16);
            
            document.getElementById('temp-datetime').value = now;
            document.getElementById('nett-date').value = today;
            document.getElementById('recep-date').value = today;
            document.getElementById('prod-debut').value = new Date().toLocaleTimeString('fr-        <!-- Autres onglets similaires... -->

        <!-- Production -->
        <div class="tab-content" id="production">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üè≠ Fiche de Production</h2>
                    <div class="card-actions">
                        <button class="btn btn-primary" onclick="nouvelleProduction()">
                            ‚ûï Nouveau Lot
                        </button>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">N¬∞ Lot (auto-g√©n√©r√©)</label>
                        <input type="text" class="form-input" id="prod-lot" readonly>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Vari√©t√© Cookie</label>
                        <select class="form-input" id="prod-variete">
                            <option value="">S√©lectionner une vari√©t√©</option>
                            <option>LAIT</option>
                            <option>NOIR</option>
                            <option>3 CHOCOLAT</option>
                            <option>FULL</option>
                            <option>NATURE</option>
                            <option>KINDER</option>
                            <option>SNICKERS</option>
                            <option>MATCHA</option>
                            <option>M&MS</option>
                            <option>NOISETTES</option>
                            <option>P√âCAN</option>
                            <option>PISTACHE</option>
                            <option>SP√âCULOOS</option>
                            <option>CRANBERRIES</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Quantit√© (pi√®ces)</label>
                        <input type="number" class="form-input" id="prod-quantite" placeholder="Ex: 250">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Heure D√©but</label>
                        <input type="time" class="form-input" id="prod-debut">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Heure Fin</label>
                        <input type="time" class="form-input" id="prod-fin">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Temp√©rature Cuisson (¬∞C)</label>
                        <input type="number" class="form-input" id="prod-temperature" placeholder="160-180">
                    </div>
                </div>

                <div class="card" style="margin: 20px 0;">
                    <h3>üì¶ Mati√®res Premi√®res Utilis√©es</h3>
                    <div id="matieres-premieres">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Mati√®re Premi√®re</label>
                                <select class="form-input mp-nom">
                                    <option>Farine</option>
                                    <option>Beurre</option>
                                    <option>≈íufs frais</option>
                                    <option>≈íufs liquides</option>
                                    <option>Chocolat lait</option>
                                    <option>Chocolat noir</option>
                                    <option>Chocolat blanc</option>
                                    <option>Sucre</option>
                                    <option>Bicarbonate</option>
                                    <option>Noisettes</option>
                                    <option>Autres</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">N¬∞ Lot / DLC</label>
                                <input type="text" class="form-input mp-lot" placeholder="N¬∞ lot fournisseur">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Quantit√©</label>
                                <input type="text" class="form-input mp-quantite" placeholder="Ex: 2kg">
                            </div>
                            <div class="form-group">
                                <button class="btn btn-primary" onclick="ajouterMP()">‚ûï Ajouter MP</button>
                            </div>
                        </div>
                    </div>
                    <div id="liste-mp"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">Contr√¥les R√©alis√©s</label>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="ctrl-temp-mp"> Temp√©rature mati√®res premi√®res
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="ctrl-proprete"> Propret√© √©quipements
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="ctrl-hygiene"> Hygi√®ne personnel
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="ctrl-cuisson"> Temp√©rature cuisson
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="ctrl-aspect"> Aspect produits finis
                        </label>
                        <label style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="ctrl-refroid"> Refroidissement (&lt; 10¬∞C en 2h)
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Photos Production</label>
                    <div class="photo-upload" onclick="ouvrirCamera('prod')">
                        üì∑ Photographier les cookies produits
                    </div>
                    <div class="photo-preview" id="prod-photos"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">Observations</label>
                    <textarea class="form-input" id="prod-observations" rows="3" 
                              placeholder="Anomalies, incidents, remarques particuli√®res..."></textarea>
                </div>

                <button class="btn btn-success" onclick="sauvegarderProduction()">
                    üíæ Enregistrer Production
                </button>
            </div>
        </div>

        <!-- Nettoyage -->
        <div class="tab-content" id="nettoyage">
            <div class="card">
                <div<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMS MADAME COOKIES - Application de Gestion</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo h1 {
            color: #2c3e50;
            font-size: 28px;
        }

        .logo-icon {
            font-size: 40px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-info {
            text-align: right;
        }

        .user-info h3 {
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .user-info p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .nav-tab {
            flex: 1;
            min-width: 150px;
            padding: 15px 20px;
            background: transparent;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: #7f8c8d;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .nav-tab:hover:not(.active) {
            background: #f8f9fa;
            color: #2c3e50;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f3f4;
        }

        .card-title {
            font-size: 22px;
            font-weight: 700;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #55efc4, #00b894);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff7675, #d63031);
            color: white;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
        }

        .form-input {
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .temp-input {
            background: #fff3cd;
            border-color: #ffc107;
        }

        .temp-input.alert {
            background: #f8d7da;
            border-color: #dc3545;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e1e8ed;
        }

        .data-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-conforme {
            background: #d4edda;
            color: #155724;
        }

        .status-non-conforme {
            background: #f8d7da;
            color: #721c24;
        }

        .status-alerte {
            background: #fff3cd;
            color: #856404;
        }

        .photo-upload {
            border: 2px dashed #e1e8ed;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-upload:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }

        .photo-upload.active {
            border-color: #667eea;
            background: #e8f4f8;
        }

        .photo-preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .photo-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .photo-item img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        .photo-delete {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 14px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .export-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .hidden {
            display: none;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .camera-section {
            margin: 20px 0;
        }

        #video {
            width: 100%;
            max-width: 400px;
            border-radius: 8px;
        }

        #canvas {
            display: none;
        }

        .alert {
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            font-weight: 600;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }

        .alert-warning {
            background: #fff3cd;
            color: #856404;
            border-left: 4px solid #ffc107;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">üç™</div>
                <div>
                    <h1>PMS MADAME COOKIES</h1>
                    <p>Syst√®me de Gestion Qualit√©</p>
                </div>
            </div>
            <div class="user-info">
                <h3>Wendy JEAN MARIE</h3>
                <p>Responsable Production</p>
                <p id="current-date"></p>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="dashboard">
                üìä Tableau de Bord
            </button>
            <button class="nav-tab" data-tab="temperatures">
                üå°Ô∏è Temp√©ratures
            </button>
            <button class="nav-tab" data-tab="production">
                üè≠ Production
            </button>
            <button class="nav-tab" data-tab="nettoyage">
                üßΩ Nettoyage
            </button>
            <button class="nav-tab" data-tab="reception">
                üì¶ R√©ception
            </button>
            <button class="nav-tab" data-tab="historique">
                üìã Historique
            </button>
            <button class="nav-tab" data-tab="exports">
                üìÑ Exports DAAF
            </button>
        </div>

        <!-- Tableau de Bord -->
        <div class="tab-content active" id="dashboard">
            <div class="stats-grid">
                <div class="stat-card" style="border-left: 4px solid #28a745;">
                    <div class="stat-number" style="color: #28a745;" id="stat-conformes">0</div>
                    <div class="stat-label">Contr√¥les Conformes</div>
                </div>
                <div class="stat-card" style="border-left: 4px solid #dc3545;">
                    <div class="stat-number" style="color: #dc3545;" id="stat-non-conformes">0</div>
                    <div class="stat-label">Non-Conformit√©s</div>
                </div>
                <div class="stat-card" style="border-left: 4px solid #ffc107;">
                    <div class="stat-number" style="color: #ffc107;" id="stat-productions">0</div>
                    <div class="stat-label">Lots Produits</div>
                </div>
                <div class="stat-card" style="border-left: 4px solid #17a2b8;">
                    <div class="stat-number" style="color: #17a2b8;" id="stat-analyses">0</div>
                    <div class="stat-label">Analyses Pr√©vues</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üö® Alertes du Jour</h2>
                </div>
                <div id="alertes-jour">
                    <div class="alert alert-success">
                        ‚úÖ Tous les √©quipements fonctionnent correctement
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üìÖ Planning du Jour</h2>
                </div>
                <div id="planning-jour">
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 10px; margin: 5px 0; background: #f8f9fa; border-radius: 5px;">
                            <strong>08:00</strong> - Contr√¥le temp√©ratures √©quipements
                        </li>
                        <li style="padding: 10px; margin: 5px 0; background: #f8f9fa; border-radius: 5px;">
                            <strong>12:00</strong> - Contr√¥le temp√©ratures + Nettoyage √©quipements
                        </li>
                        <li style="padding: 10px; margin: 5px 0; background: #f8f9fa; border-radius: 5px;">
                            <strong>13:30</strong> - Nettoyage complet atelier
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Contr√¥le Temp√©ratures -->
        <div class="tab-content" id="temperatures">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üå°Ô∏è Contr√¥le des Temp√©ratures</h2>
                    <div class="card-actions">
                        <button class="btn btn-primary" onclick="ajouterControleTemp()">
                            üìä Nouveau Contr√¥le
                        </button>
                        <button class="btn btn-success" onclick="exporterTemperatures()">
                            üìÑ Exporter
                        </button>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Date et Heure</label>
                        <input type="datetime-local" class="form-input" id="temp-datetime">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Responsable</label>
                        <select class="form-input" id="temp-responsable">
                            <option>Wendy JEAN MARIE</option>
                            <option>√âquipe Production</option>
                        </select>
                    </div>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">Unit√© froide +2 portes (4,2¬∞C ¬± 1¬∞C)</label>
                        <input type="number" step="0.1" class="form-input temp-input" id="temp-froide" 
                               placeholder="Temp√©rature relev√©e" onchange="verifierTemperature(this, 4.2, 1)">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Unit√© n√©gative (-13¬∞C ¬± 2¬∞C)</label>
                        <input type="number" step="0.1" class="form-input temp-input" id="temp-negative" 
                               placeholder="Temp√©rature relev√©e" onchange="verifierTemperature(this, -13, 2)">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Surg√©lateur 1 (-18¬∞C ¬± 2¬∞C)</label>
                        <input type="number" step="0.1" class="form-input temp-input" id="temp-surgel1" 
                               placeholder="Temp√©rature relev√©e" onchange="verifierTemperature(this, -18, 2)">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Surg√©lateur 2 (-18¬∞C ¬± 2¬∞C)</label>
                        <input type="number" step="0.1" class="form-input temp-input" id="temp-surgel2" 
                               placeholder="Temp√©rature relev√©e" onchange="verifierTemperature(this, -18, 2)">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Surg√©lateur 3 (-18¬∞C ¬± 2¬∞C)</label>
                        <input type="number" step="0.1" class="form-input temp-input" id="temp-surgel3" 
                               placeholder="Temp√©rature relev√©e" onchange="verifierTemperature(this, -18, 2)">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ambiance atelier (&lt; 25¬∞C)</label>
                        <input type="number" step="0.1" class="form-input temp-input" id="temp-ambiance" 
                               placeholder="Temp√©rature relev√©e" onchange="verifierTemperature(this, 25, 0, 'max')">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Actions correctives (si n√©cessaire)</label>
                    <textarea class="form-input" id="temp-actions" rows="3" 
                              placeholder="D√©crire les actions correctives prises..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Photos des √©quipements (optionnel)</label>
                    <div class="photo-upload" onclick="ouvrirCamera('temp')">
                        üì∑ Prendre une photo des √©quipements
                    </div>
                    <div class="photo-preview" id="temp-photos"></div>
                </div>

                <button class="btn btn-primary" onclick="sauvegarderTemperatures()">
                    üíæ Sauvegarder Contr√¥le
                </button>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üìä Historique des Temp√©ratures</h2>
                </div>
                <div id="historique-temperatures">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date/Heure</th>
                                <th>Unit√© Froide</th>
                                <th>N√©gative</th>
                                <th>Surg√©l. 1</th>
                                <th>Surg√©l. 2</th>
                                <th>Surg√©l. 3</th>
                                <th>Ambiance</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="table-temperatures">
                            <!-- Les donn√©es seront ajout√©es ici dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Autres onglets similaires... -->